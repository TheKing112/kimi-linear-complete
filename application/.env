# =============================================================================
# KIMI LINEAR 48B - PRODUCTION ENVIRONMENT
# Sparse Activation: 48B Total, 3B Active per Forward Pass
# =============================================================================

# ──────────────────────────────────────────────────────────────────────────────
# DISCORD BOT (ERFORDERLICH)
# ──────────────────────────────────────────────────────────────────────────────
# Erstelle Bot: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=MTQzNjgzNjYwMTgxOTgyNDE4OQ.G2y_8p.anr8cNyvwAZnvjw5ovKxnZIQw9J6fgEpPju-dc
DISCORD_GUILD_ID=1234567890123456789  # Optional: Server ID für Slash Commands
DISCORD_OWNER_ID=519611049805217792
DISCORD_CONTROL_USERS=579043340893290497,519611049805217792  # Wer steuern darf
DISCORD_CONTROL_CHANNEL=1437151890327601264          # Für Auto-Status-Meldungen

# ──────────────────────────────────────────────────────────────────────────────
# KIMI LINEAR 48B MODEL (WICHTIG: fla-core für A3B Architektur)
# ──────────────────────────────────────────────────────────────────────────────
MODEL_NAME=moonshotai/Kimi-Linear-48B-A3B-Instruct
MODEL_PATH=/models/kimi-linear-48b
DEVICE=cuda
LOAD_IN_4BIT=true
TORCH_COMPILE=true
TRUST_REMOTE_CODE=true
MAX_INPUT_LENGTH=1048576
MAX_BATCH_TOKENS=8192
GPU_COUNT=1
CUDA_VISIBLE_DEVICES=0

# ──────────────────────────────────────────────────────────────────────────────
# HUGGING FACE (Optional für private Models)
# ──────────────────────────────────────────────────────────────────────────────
HF_TOKEN=hf_...your_huggingface_token_here
HF_HUB_ENABLE_HF_TRANSFER=1

# ──────────────────────────────────────────────────────────────────────────────
# DATABASE (PostgreSQL + pgvector)
# ──────────────────────────────────────────────────────────────────────────────
POSTGRES_PASSWORD=gen_secure_32_char_random_string_here
POSTGRES_USER=cognee
POSTGRES_DB=cognee
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://cognee:${POSTGRES_PASSWORD}@postgres:5432/cognee

# ──────────────────────────────────────────────────────────────────────────────
# REDIS CACHE
# ──────────────────────────────────────────────────────────────────────────────
REDIS_URL=redis://redis:6379/0

# ──────────────────────────────────────────────────────────────────────────────
# API URLs (Internal Docker Network)
# ──────────────────────────────────────────────────────────────────────────────
KIMI_LINEAR_URL=http://kimi-linear:8003
COGNEE_URL=http://cognee:8001
MCP_URL=http://mcp-server:8002
GITHUB_INTEGRATION_URL=http://github-integration:8004

# ──────────────────────────────────────────────────────────────────────────────
# GITHUB INTEGRATION (ERFORDERLICH für autonome Bearbeitung)
# ──────────────────────────────────────────────────────────────────────────────
# Token: https://github.com/settings/tokens (Scopes: repo, workflow)
GITHUB_TOKEN=ghp_your_github_personal_access_token_here
GITHUB_WEBHOOK_SECRET=your_random_webhook_secret_here
GITHUB_AUTO_REVIEW=true
GITHUB_AUTO_CREATE_PR=true  # true = automatisch PRs erstellen (Vorsicht!)

# ──────────────────────────────────────────────────────────────────────────────
# AUTONOEME BEARBEITUNG (Sicherheit & Kontrolle)
# ──────────────────────────────────────────────────────────────────────────────
AUTONOMOUS_MODE_ENABLED=true
AUTONOMOUS_REQUIRE_APPROVAL=true  # true = Bot fragt vor jeder Änderung nach
AUTONOMOUS_MAX_TOKENS=4096
AUTONOMOUS_TEMPERATURE=0.2
AUTONOMOUS_CREATE_BRANCH=true  # true = Erstellt Feature-Branch, false = Direkt auf main (NICHT EMPFOHLEN)
AUTONOMOUS_BRANCH_PREFIX=autonomous/
AUTONOMOUS_COMMIT_MESSAGE_TEMPLATE="[autonomous] {description} by Kimi Linear"
AUTONOMOUS_REVIEW_TRIGGER="[auto-review]"  # String im Commit-Msg löst Review aus

# ──────────────────────────────────────────────────────────────────────────────
# AI APIs (Optional für erweiterte Features)
# ──────────────────────────────────────────────────────────────────────────────
ANTHROPIC_API_KEY=sk-ant-...your_anthropic_key_here
OPENAI_API_KEY=sk-proj-...your_openai_key_here

# ──────────────────────────────────────────────────────────────────────────────
# MONITORING (Grafana + Prometheus)
# ──────────────────────────────────────────────────────────────────────────────
GRAFANA_PASSWORD=admin_gen_secure_16_char_here
GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD}
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# ──────────────────────────────────────────────────────────────────────────────
# NETWORK & SECURITY
# ──────────────────────────────────────────────────────────────────────────────
NETWORK_NAME=kimi-network
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8003
API_RATE_LIMIT=100/minute

# ──────────────────────────────────────────────────────────────────────────────
# LOGGING & DEBUGGING
# ──────────────────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO
LOG_FILE=/app/logs/kimi-linear.log
ENABLE_DEBUG_ENDPOINTS=false